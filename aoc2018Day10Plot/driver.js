//alert('CONNECTED');
var WIDTH = Number(document.getElementById('canvas').getAttribute('width'));
var HEIGHT = Number(document.getElementById('canvas').getAttribute('height'));
var canvas = document.getElementById('canvas');

var test_position = [
                    [ 9,  1],
                    [ 7,  0],
                    [ 3, -2],
                    [ 6, 10],
                    [ 2, -4],
                    [-6, 10],
                    [ 1,  8],
                    [ 1,  7],
                    [-3, 11],
                    [ 7,  6],
                    [-2,  3],
                    [-4,  3],
                    [10, -3],
                    [ 5, 11],
                    [ 4,  7],
                    [ 8, -2],
                    [15,  0],
                    [ 1,  6],
                    [ 8,  9],
                    [ 3,  3],
                    [ 0,  5],
                    [-2,  2],
                    [ 5, -2],
                    [ 1,  4],
                    [-2,  7],
                    [ 3,  6],
                    [ 5,  0],
                    [-6,  0],
                    [ 5,  9],
                    [14,  7],
                    [-3,  6] 
                    ];

var test_velocity = [
                    [ 0,  2],
                    [-1,  0],
                    [-1,  1],
                    [-2, -1],
                    [ 2,  2],
                    [ 2, -2],
                    [ 1, -1],
                    [ 1,  0],
                    [ 1, -2],
                    [-1, -1],
                    [ 1,  0],
                    [ 2,  0],
                    [-1,  1],
                    [ 1, -2],
                    [ 0, -1],
                    [ 0,  1],
                    [-2,  0],
                    [ 1,  0],
                    [ 0, -1],
                    [-1,  1],
                    [ 0, -1],
                    [ 2,  0],
                    [ 1,  2],
                    [ 2,  1],
                    [ 2, -2],
                    [-1, -1],
                    [ 1,  0],
                    [ 2,  0],
                    [ 1, -2],
                    [-2,  0],
                    [ 2, -1]
                    ];

var prod_position = [
[-360,-401],
[120,239],
[479,319],
[-600,-81],
[479,319],
[-481,-241],
[599,-401],
[-360,-321],
[-600,159],
[-120,-161],
[-600,-401],
[-481,159],
[-480,-321],
[-120,-161],
[-120,-321],
[-360,-241],
[-600,-161],
[-360,319],
[119,239],
[-600,-241],
[-480,-81],
[479,-321],
[-241,239],
[359,-321],
[-600,-161],
[-480,79],
[-241,-241],
[599,-161],
[-241,-241],
[479,399],
[-600,-161],
[-600,-401],
[599,159],
[240,-321],
[-480,79],
[479,-321],
[-241,319],
[120,79],
[-120,-81],
[359,79],
[-240,319],
[-600,-401],
[360,159],
[-600,-321],
[-600,-161],
[-480,159],
[479,79],
[-600,-401],
[-360,399],
[-480,-321],
[-600,-401],
[-480,79],
[599,79],
[359,-161],
[360,-241],
[359,-81],
[119,-81],
[120,-321],
[-240,159],
[-121,399],
[-241,159],
[120,-321],
[-360,-241],
[-360,159],
[120,79],
[-121,-81],
[-600,239],
[359,-401],
[479,-241],
[119,159],
[-600,399],
[239,-321],
[-600,-241],
[119,-81],
[-480,-321],
[-121,239],
[239,319],
[239,319],
[-241,-81],
[599,159],
[-600,319],
[239,-161],
[-120,399],
[599,-321],
[-480,239],
[-240,159],
[239,159],
[599,-321],
[-600,-241],
[479,-241],
[599,-401],
[-480,399],
[-480,79],
[120,79],
[-361,239],
[120,319],
[599,-321],
[119,-321],
[-241,239],
[-241,239],
[479,-81],
[-121,-161],
[239,-241],
[599,-241],
[-360,-161],
[-480,399],
[-360,319],
[-360,-321],
[239,239],
[239,319],
[479,399],
[-600,319],
[-240,79],
[599,-81],
[-121,-241],
[-600,159],
[599,-401],
[-360,-321],
[359,-161],
[-600,399],
[359,159],
[479,-161],
[-360,79],
[240,-321],
[-240,399],
[-600,399],
[119,79],
[-480,-81],
[239,159],
[599,-81],
[119,159],
[-120,-401],
[-121,319],
[359,-161],
[-600,-241],
[479,319],
[-480,-401],
[-121,319],
[599,-161],
[479,399],
[599,239],
[239,159],
[-361,-401],
[239,-81],
[360,-81],
[599,-321],
[-600,319],
[120,79],
[-480,-241],
[119,-161],
[480,-81],
[599,239],
[-480,79],
[-241,159],
[120,-401],
[-240,-401],
[-120,-401],
[-120,-161],
[239,239],
[479,-81],
[120,-401],
[-480,239],
[119,159],
[239,-241],
[119,319],
[-240,79],
[-480,-321],
[239,-161],
[-600,79],
[-360,-81],
[599,-401],
[239,-321],
[120,-321],
[-480,-321],
[-480,239],
[120,399],
[480,-321],
[479,-241],
[479,159],
[359,319],
[599,399],
[239,-241],
[-121,-241],
[120,-81],
[-121,399],
[-120,-401],
[239,79],
[359,-401],
[-360,319],
[-480,-161],
[-480,-401],
[120,319],
[-480,79],
[240,-401],
[480,319],
[-600,-161],
[599,-161],
[239,-321],
[-480,-241],
[-481,159],
[-360,399],
[119,-81],
[239,-241],
[-481,399],
[119,319],
[-480,-321],
[-360,79],
[600,239],
[239,159],
[-600,-241],
[119,159],
[359,159],
[360,-321],
[-121,-241],
[-241,159],
[480,-321],
[239,-321],
[-121,159],
[-360,-81],
[119,-161],
[600,239],
[-240,319],
[-600,-241],
[479,239],
[-360,-81],
[-600,-321],
[599,159],
[120,399],
[359,-401],
[-121,-241],
[240,-241],
[-600,319],
[-241,-161],
[-121,239],
[359,-161],
[-600,-401],
[-480,399],
[599,-161],
[360,319],
[-480,319],
[-120,-241],
[-360,319],
[239,239],
[120,79],
[599,-401],
[239,-81],
[599,239],
[-360,-321],
[479,159],
[-360,-81],
[-240,-401],
[119,239],
[359,79],
[240,399],
[359,159],
[-241,-81],
[-480,-161],
[-361,-81],
[119,239],
[-600,79],
[479,399],
[-480,319],
[-121,-401],
[-121,79],
[-360,-81],
[-481,-161],
[599,-241],
[359,319],
[240,-81],
[239,-321],
[-240,159],
[119,159],
[599,-81],
[240,-321],
[480,399],
[479,-321],
[599,319],
[359,319],
[599,79],
[359,159],
[-600,239],
[-480,-241],
[-480,239],
[-481,-161],
[240,-321],
[-360,79],
[479,-81],
[239,-161],
[360,-241],
[359,79],
[360,-321],
[-360,-241],
[239,239],
[-480,-321],
[-120,239],
[599,-81],
[-240,-161],
[-360,-161],
[-360,-81],
[360,-401],
[239,159],
[119,239],
[-240,-321],
[119,399],
[-480,79],
[119,-81],
[359,-241],
[-121,-401],
[359,159],
[479,319],
[-600,-161],
[479,159],
[-360,-81],
[-240,79],
[-600,159],
[-600,-241],
[-240,399],
[479,319],
[-600,159],
[-120,-81],
[-600,-81],
[-240,79],
[240,319],
[-360,-401],
[120,-401],
[599,-321],
[-361,-161],
[-600,79],
[239,-321],
[-360,239],
[-120,-401],
[120,79],
[-360,399],
[239,399]
]

// var prod_position = [
//     [-31684, -53051],
//     [ 10860,  32026],
//     [ 42712,  42663],
//     [-52978, -10507],
//     [ 42704,  42656],
//     [-42368, -31781],
//     [ 53391, -53049],
//     [-31694, -42409],
//     [-52970,  21388],
//     [-10433, -21140],
//     [-53002, -53044],
//     [-42363,  21390],
//     [-42355, -42411],
//     [-10409, -21143],
//     [-10418, -42410],
//     [-31714, -31783],
//     [-52962, -21149],
//     [-31675,  42660],
//     [ 10802,  32028],
//     [-52944, -31778],
//     [-42317, -10511],
//     [ 42744, -42413],
//     [-21092,  32023],
//     [ 32114, -42417],
//     [-52985, -21149],
//     [-42339,  10762],
//     [-21100, -31779],
//     [ 53386, -21140],
//     [-21084, -31776],
//     [ 42752,  53297],
//     [-52982, -21149],
//     [-52998, -53051],
//     [ 53373,  21387],
//     [ 21495, -42412],
//     [-42320,  10762],
//     [ 42720, -42417],
//     [-21100,  42658],
//     [ 10839,  10761],
//     [-10422, -10511],
//     [ 32071,  10753],
//     [-21075,  42664],
//     [-52986, -53051],
//     [ 32130,  21394],
//     [-52950, -42408],
//     [-52994, -21149],
//     [-42360,  21387],
//     [ 42706,  10753],
//     [-52968, -53051],
//     [-31721,  53298],
//     [-42339, -42408],
//     [-52978, -53051],
//     [-42328,  10762],
//     [ 53351,  10759],
//     [ 32111, -21149],
//     [ 32123, -31781],
//     [ 32094, -10515],
//     [ 10838, -10515],
//     [ 10858, -42417],
//     [-21050,  21396],
//     [-10458,  53291],
//     [-21099,  21387],
//     [ 10845, -42408],
//     [-31686, -31783],
//     [-31702,  21395],
//     [ 10842,  10756],
//     [-10461, -10512],
//     [-52949,  32030],
//     [ 32087, -53047],
//     [ 42746, -31779],
//     [ 10831,  21388],
//     [-53002,  53291],
//     [ 21476, -42413],
//     [-52989, -31779],
//     [ 10810, -10515],
//     [-42341, -42417],
//     [-10461,  32024],
//     [ 21464,  42658],
//     [ 21436,  42659],
//     [-21084, -10509],
//     [ 53394,  21388],
//     [-52994,  42658],
//     [ 21477, -21145],
//     [-10406,  53295],
//     [ 53351, -42412],
//     [-42336,  32028],
//     [-21060,  21394],
//     [ 21436,  21395],
//     [ 53391, -42408],
//     [-52992, -31779],
//     [ 42712, -31778],
//     [ 53378, -53049],
//     [-42351,  53289],
//     [-42352,  10757],
//     [ 10853,  10753],
//     [-31726,  32030],
//     [ 10850,  42663],
//     [ 53351, -42408],
//     [ 10827, -42411],
//     [-21095,  32022],
//     [-21083,  32025],
//     [ 42712, -10509],
//     [-10447, -21149],
//     [ 21444, -31777],
//     [ 53396, -31779],
//     [-31686, -21140],
//     [-42312,  53297],
//     [-31678,  42655],
//     [-31700, -42408],
//     [ 21436,  32024],
//     [ 21436,  42655],
//     [ 42712,  53293],
//     [-52942,  42658],
//     [-21076,  10761],
//     [ 53388, -10515],
//     [-10462, -31779],
//     [-52970,  21393],
//     [ 53356, -53047],
//     [-31694, -42417],
//     [ 32096, -21149],
//     [-52975,  53298],
//     [ 32081,  21391],
//     [ 42736, -21148],
//     [-31702,  10757],
//     [ 21481, -42417],
//     [-21057,  53289],
//     [-52986,  53293],
//     [ 10815,  10755],
//     [-42341, -10515],
//     [ 21452,  21395],
//     [ 53346, -10511],
//     [ 10810,  21389],
//     [-10410, -53050],
//     [-10464,  42655],
//     [ 32096, -21149],
//     [-52986, -31781],
//     [ 42736,  42658],
//     [-42355, -53050],
//     [-10458,  42664],
//     [ 53389, -21140],
//     [ 42720,  53290],
//     [ 53366,  32024],
//     [ 21436,  21396],
//     [-31725, -53047],
//     [ 21449, -10514],
//     [ 32121, -10515],
//     [ 53365, -42413],
//     [-52960,  42664],
//     [ 10842,  10758],
//     [-42320, -31775],
//     [ 10821, -21149],
//     [ 42765, -10507],
//     [ 53394,  32029],
//     [-42360,  10759],
//     [-21096,  21387],
//     [ 10859, -53049],
//     [-21044, -53050],
//     [-10434, -53049],
//     [-10434, -21147],
//     [ 21461,  32021],
//     [ 42733, -10515],
//     [ 10858, -53043],
//     [-42324,  32021],
//     [ 10835,  21396],
//     [ 21468, -31778],
//     [ 10815,  42660],
//     [-21057,  10757],
//     [-42334, -42408],
//     [ 21464, -21146],
//     [-53002,  10760],
//     [-31706, -10515],
//     [ 53391, -53051],
//     [ 21476, -42410],
//     [ 10855, -42415],
//     [-42319, -42408],
//     [-42360,  32024],
//     [ 10847,  53298],
//     [ 42763, -42413],
//     [ 42712, -31776],
//     [ 42708,  21391],
//     [ 32083,  42655],
//     [ 53398,  53295],
//     [ 21452, -31782],
//     [-10466, -31782],
//     [ 10861, -10510],
//     [-10461,  53291],
//     [-10418, -53051],
//     [ 21476,  10757],
//     [ 32086, -53043],
//     [-31705,  42655],
//     [-42335, -21140],
//     [-42360, -53046],
//     [ 10845,  42664],
//     [-42308,  10759],
//     [ 21487, -53051],
//     [ 42764,  42658],
//     [-52989, -21146],
//     [ 53351, -21142],
//     [ 21436, -42411],
//     [-42360, -31782],
//     [-42365,  21391],
//     [-31684,  53298],
//     [ 10838, -10506],
//     [ 21444, -31778],
//     [-42368,  53291],
//     [ 10802,  42661],
//     [-42344, -42410],
//     [-31689,  10753],
//     [ 53399,  32022],
//     [ 21462,  21387],
//     [-53002, -31780],
//     [ 10829,  21396],
//     [ 32104,  21396],
//     [ 32120, -42408],
//     [-10458, -31780],
//     [-21100,  21393],
//     [ 42765, -42409],
//     [ 21465, -42408],
//     [-10462,  21387],
//     [-31684, -10510],
//     [ 10802, -21145],
//     [ 53399,  32030],
//     [-21060,  42657],
//     [-52986, -31781],
//     [ 42705,  32025],
//     [-31677, -10513],
//     [-52962, -42409],
//     [ 53367,  21389],
//     [ 10863,  53289],
//     [ 32110, -53045],
//     [-10458, -31774],
//     [ 21494, -31778],
//     [-52958,  42664],
//     [-21087, -21141],
//     [-10450,  32024],
//     [ 32098, -21140],
//     [-52941, -53043],
//     [-42328,  53294],
//     [ 53378, -21148],
//     [ 32128,  42659],
//     [-42342,  42664],
//     [-10422, -31779],
//     [-31702,  42662],
//     [ 21449,  32023],
//     [ 10862,  10755],
//     [ 53340, -53047],
//     [ 21439, -10511],
//     [ 53387,  32027],
//     [-31707, -42408],
//     [ 42736,  21392],
//     [-31690, -10515],
//     [-21048, -53051],
//     [ 10818,  32021],
//     [ 32103,  10753],
//     [ 21492,  53289],
//     [ 32086,  21395],
//     [-21082, -10511],
//     [-42315, -21140],
//     [-31724, -10511],
//     [ 10826,  32028],
//     [-52990,  10757],
//     [ 42757,  53290],
//     [-42307,  42656],
//     [-10449, -53051],
//     [-10466,  10758],
//     [-31708, -10510],
//     [-42363, -21147],
//     [ 53365, -31779],
//     [ 32070,  42660],
//     [ 21493, -10512],
//     [ 21455, -42413],
//     [-21065,  21396],
//     [ 10810,  21394],
//     [ 53351, -10510],
//     [ 21488, -42414],
//     [ 42764,  53296],
//     [ 42725, -42417],
//     [ 53366,  42655],
//     [ 32082,  42659],
//     [ 53354,  10757],
//     [ 32086,  21396],
//     [-52994,  32025],
//     [-42319, -31774],
//     [-42360,  32028],
//     [-42368, -21144],
//     [ 21493, -42410],
//     [-31700,  10753],
//     [ 42729, -10506],
//     [ 21468, -21142],
//     [ 32131, -31774],
//     [ 32102,  10758],
//     [ 32126, -42408],
//     [-31682, -31780],
//     [ 21452,  32022],
//     [-42335, -42417],
//     [-10409,  32027],
//     [ 53382, -10511],
//     [-21059, -21140],
//     [-31684, -21144],
//     [-31709, -10515],
//     [ 32119, -53051],
//     [ 21449,  21393],
//     [ 10826,  32030],
//     [-21074, -42408],
//     [ 10814,  53293],
//     [-42352,  10759],
//     [ 10822, -10515],
//     [ 32110, -31780],
//     [-10450, -53045],
//     [ 32115,  21387],
//     [ 42723,  42659],
//     [-52989, -21149],
//     [ 42720,  21392],
//     [-31716, -10515],
//     [-21075,  10762],
//     [-52953,  21393],
//     [-52997, -31782],
//     [-21075,  53295],
//     [ 42707,  42655],
//     [-52986,  21389],
//     [-10437, -10515],
//     [-52961, -10506],
//     [-21040,  10755],
//     [ 21493,  42657],
//     [-31685, -53042],
//     [ 10844, -53051],
//     [ 53378, -42411],
//     [-31731, -21149],
//     [-52989,  10757],
//     [ 21468, -42414],
//     [-31694,  32022],
//     [-10425, -53047],
//     [ 10839,  10754],
//     [-31721,  53297],
//     [ 21456,  53293] 
// ];

var prod_velocity = [
    [ 3,  5],
    [-1, -3],
    [-4, -4],
    [ 5,  1],
    [-4, -4],
    [ 4,  3],
    [-5,  5],
    [ 3,  4],
    [ 5, -2],
    [ 1,  2],
    [ 5,  5],
    [ 4, -2],
    [ 4,  4],
    [ 1,  2],
    [ 1,  4],
    [ 3,  3],
    [ 5,  2],
    [ 3, -4],
    [-1, -3],
    [ 5,  3],
    [ 4,  1],
    [-4,  4],
    [ 2, -3],
    [-3,  4],
    [ 5,  2],
    [ 4, -1],
    [ 2,  3],
    [-5,  2],
    [ 2,  3],
    [-4, -5],
    [ 5,  2],
    [ 5,  5],
    [-5, -2],
    [-2,  4],
    [ 4, -1],
    [-4,  4],
    [ 2, -4],
    [-1, -1],
    [ 1,  1],
    [-3, -1],
    [ 2, -4],
    [ 5,  5],
    [-3, -2],
    [ 5,  4],
    [ 5,  2],
    [ 4, -2],
    [-4, -1],
    [ 5,  5],
    [ 3, -5],
    [ 4,  4],
    [ 5,  5],
    [ 4, -1],
    [-5, -1],
    [-3,  2],
    [-3,  3],
    [-3,  1],
    [-1,  1],
    [-1,  4],
    [ 2, -2],
    [ 1, -5],
    [ 2, -2],
    [-1,  4],
    [ 3,  3],
    [ 3, -2],
    [-1, -1],
    [ 1,  1],
    [ 5, -3],
    [-3,  5],
    [-4,  3],
    [-1, -2],
    [ 5, -5],
    [-2,  4],
    [ 5,  3],
    [-1,  1],
    [ 4,  4],
    [ 1, -3],
    [-2, -4],
    [-2, -4],
    [ 2,  1],
    [-5, -2],
    [ 5, -4],
    [-2,  2],
    [ 1, -5],
    [-5,  4],
    [ 4, -3],
    [ 2, -2],
    [-2, -2],
    [-5,  4],
    [ 5,  3],
    [-4,  3],
    [-5,  5],
    [ 4, -5],
    [ 4, -1],
    [-1, -1],
    [ 3, -3],
    [-1, -4],
    [-5,  4],
    [-1,  4],
    [ 2, -3],
    [ 2, -3],
    [-4,  1],
    [ 1,  2],
    [-2,  3],
    [-5,  3],
    [ 3,  2],
    [ 4, -5],
    [ 3, -4],
    [ 3,  4],
    [-2, -3],
    [-2, -4],
    [-4, -5],
    [ 5, -4],
    [ 2, -1],
    [-5,  1],
    [ 1,  3],
    [ 5, -2],
    [-5,  5],
    [ 3,  4],
    [-3,  2],
    [ 5, -5],
    [-3, -2],
    [-4,  2],
    [ 3, -1],
    [-2,  4],
    [ 2, -5],
    [ 5, -5],
    [-1, -1],
    [ 4,  1],
    [-2, -2],
    [-5,  1],
    [-1, -2],
    [ 1,  5],
    [ 1, -4],
    [-3,  2],
    [ 5,  3],
    [-4, -4],
    [ 4,  5],
    [ 1, -4],
    [-5,  2],
    [-4, -5],
    [-5, -3],
    [-2, -2],
    [ 3,  5],
    [-2,  1],
    [-3,  1],
    [-5,  4],
    [ 5, -4],
    [-1, -1],
    [ 4,  3],
    [-1,  2],
    [-4,  1],
    [-5, -3],
    [ 4, -1],
    [ 2, -2],
    [-1,  5],
    [ 2,  5],
    [ 1,  5],
    [ 1,  2],
    [-2, -3],
    [-4,  1],
    [-1,  5],
    [ 4, -3],
    [-1, -2],
    [-2,  3],
    [-1, -4],
    [ 2, -1],
    [ 4,  4],
    [-2,  2],
    [ 5, -1],
    [ 3,  1],
    [-5,  5],
    [-2,  4],
    [-1,  4],
    [ 4,  4],
    [ 4, -3],
    [-1, -5],
    [-4,  4],
    [-4,  3],
    [-4, -2],
    [-3, -4],
    [-5, -5],
    [-2,  3],
    [ 1,  3],
    [-1,  1],
    [ 1, -5],
    [ 1,  5],
    [-2, -1],
    [-3,  5],
    [ 3, -4],
    [ 4,  2],
    [ 4,  5],
    [-1, -4],
    [ 4, -1],
    [-2,  5],
    [-4, -4],
    [ 5,  2],
    [-5,  2],
    [-2,  4],
    [ 4,  3],
    [ 4, -2],
    [ 3, -5],
    [-1,  1],
    [-2,  3],
    [ 4, -5],
    [-1, -4],
    [ 4,  4],
    [ 3, -1],
    [-5, -3],
    [-2, -2],
    [ 5,  3],
    [-1, -2],
    [-3, -2],
    [-3,  4],
    [ 1,  3],
    [ 2, -2],
    [-4,  4],
    [-2,  4],
    [ 1, -2],
    [ 3,  1],
    [-1,  2],
    [-5, -3],
    [ 2, -4],
    [ 5,  3],
    [-4, -3],
    [ 3,  1],
    [ 5,  4],
    [-5, -2],
    [-1, -5],
    [-3,  5],
    [ 1,  3],
    [-2,  3],
    [ 5, -4],
    [ 2,  2],
    [ 1, -3],
    [-3,  2],
    [ 5,  5],
    [ 4, -5],
    [-5,  2],
    [-3, -4],
    [ 4, -4],
    [ 1,  3],
    [ 3, -4],
    [-2, -3],
    [-1, -1],
    [-5,  5],
    [-2,  1],
    [-5, -3],
    [ 3,  4],
    [-4, -2],
    [ 3,  1],
    [ 2,  5],
    [-1, -3],
    [-3, -1],
    [-2, -5],
    [-3, -2],
    [ 2,  1],
    [ 4,  2],
    [ 3,  1],
    [-1, -3],
    [ 5, -1],
    [-4, -5],
    [ 4, -4],
    [ 1,  5],
    [ 1, -1],
    [ 3,  1],
    [ 4,  2],
    [-5,  3],
    [-3, -4],
    [-2,  1],
    [-2,  4],
    [ 2, -2],
    [-1, -2],
    [-5,  1],
    [-2,  4],
    [-4, -5],
    [-4,  4],
    [-5, -4],
    [-3, -4],
    [-5, -1],
    [-3, -2],
    [ 5, -3],
    [ 4,  3],
    [ 4, -3],
    [ 4,  2],
    [-2,  4],
    [ 3, -1],
    [-4,  1],
    [-2,  2],
    [-3,  3],
    [-3, -1],
    [-3,  4],
    [ 3,  3],
    [-2, -3],
    [ 4,  4],
    [ 1, -3],
    [-5,  1],
    [ 2,  2],
    [ 3,  2],
    [ 3,  1],
    [-3,  5],
    [-2, -2],
    [-1, -3],
    [ 2,  4],
    [-1, -5],
    [ 4, -1],
    [-1,  1],
    [-3,  3],
    [ 1,  5],
    [-3, -2],
    [-4, -4],
    [ 5,  2],
    [-4, -2],
    [ 3,  1],
    [ 2, -1],
    [ 5, -2],
    [ 5,  3],
    [ 2, -5],
    [-4, -4],
    [ 5, -2],
    [ 1,  1],
    [ 5,  1],
    [ 2, -1],
    [-2, -4],
    [ 3,  5],
    [-1,  5],
    [-5,  4],
    [ 3,  2],
    [ 5, -1],
    [-2,  4],
    [ 3, -3],
    [ 1,  5],
    [-1, -1],
    [ 3, -5],
    [-2, -5]
];

var counter = 0;

function incrementPosition() {
    position[0] += 1;
    position[1] += 1;
}

function posX(x) {
    return (WIDTH/2 + x);
}

function posY(y) {
    return (HEIGHT/2 - y);
}

function plot(x,y) {
    return ctx.fillRect(posX(x), posY(y), 1,1);
}

function drawAxes() {
    ctx.beginPath();
    // Draw y-axis.
    ctx.moveTo(WIDTH/2, 0);
    ctx.lineTo(WIDTH/2, HEIGHT);
    // Draw x-axis.
    ctx.moveTo(0, HEIGHT/2);
    ctx.lineTo(WIDTH, HEIGHT/2);
    ctx.stroke();
}

var position = prod_position;
var velocity = prod_velocity;

if (canvas.getContext) {
    var ctx = canvas.getContext('2d');
    drawAxes();
}

function step() {

    var iterations = 0;

    var foo = setInterval(function() {

        //console.log(iterations);
        // 10634
        if (iterations === 10634) {
            clearInterval(foo);
        }

        //ctx.fillStyle = '#e6e6fa';
        ctx.fillStyle = '#ff6500';

        position.forEach(function(position) {
            plot(position[0], position[1] * -1);
        });

        if (iterations >= 1) {
            for (var i = 0; i < position.length; i++) {
                ctx.clearRect(posX( (position[i][0] - velocity[i][0]) ), posY( (position[i][1] - velocity[i][1]) * -1 ), 1, 1);
            }
        }

        drawAxes();

        for (var i = 0; i < position.length; i++) {
            position[i][0] += velocity[i][0];
            position[i][1] += velocity[i][1];
        }

        document.querySelector('h3').textContent = iterations;

        iterations++;
        counter++;

    }, 0.05);
    //window.requestAnimationFrame(step);
    
}

window.requestAnimationFrame(step);
